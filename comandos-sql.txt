create table autor (
    id uuid not null primary key,
    nome varchar(100) not null,
    data_nascimento date not null,
    nacionalidade varchar(50) not null,
    data_cadastro timestamp,
    data_atualizacao timestamp,
    id_usuario uuid
);

create table livro (
    id uuid not null primary key,
    isbn varchar(20) not null unique,
    titulo varchar(150) not null,
    data_publicacao date not null,
    genero varchar(30) not null,
    preco numeric(18,2),
    data_cadastro timestamp,
    data_atualizacao timestamp,
    id_usuario uuid,
    id_autor uuid not null references autor(id),
    constraint chk_genero check (genero in ('FICCAO', 'FANTASIA', 'MISTERIO', 'ROMANCE','BIOGRAFIA','CIENCIA'))
);

create table usuario(
id uuid not null primary key,
login varchar(12) not null unique,
senha varchar(300) not null,
email varchar(150) not null unique,
roles varchar[]
)
;

CREATE TABLE client (
id uuid not null primary key,
client_id varchar(150) not null,
cliente_secret varchar(400),
redirect_uri varchar(200) not null,
scope varchar(50)
);

insert into usuario
(id, login, senha, email, roles)
values
(uuid_generate_v4(), 'gerente', '$2a$12$KxgS9HZcMbv6JklCShiXMeBDuE/D1dAwVERQECpLgt4TtNgZjFt1a', 'gerente@gmail.com','{GERENTE}')

insert into client
(id, client_id, client_secret, redirect_uri, scope)
values
(uuid_generate_v4()
,'clinet-production'
,'$2a$12$J2bIjBfsZWWmdqw440yrUeUU.VUqNn5Wj183dKx2whr4SRTiZrQ6G'
,'http://localhost:8080/authorized'
,'GERENTE')